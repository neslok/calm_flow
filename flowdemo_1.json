{"status":{},"contains_secrets":true,"product_version":"3.1.1","spec":{"description":"","resources":{"client_attrs":{"None":{"y":420.98828125,"x":1166.7578125},"24661e0a_deployment":{"y":-211.01171875,"x":841.2578125},"dd00f445-09b0-4228-bb8e-abcc85401aee":{"y":-480.26171875,"x":906.8203125},"0628530c_deployment":{"y":-192.01171875,"x":531.5078125},"6766c911_deployment":{"y":-205.01171875,"x":1152.6328125},"067c8305-5818-46d9-b3d8-34c3e11a76bf":{"y":-432.51171875,"x":547.8203125}},"service_definition_list":[{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"web"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"3aea1c52_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"584ba2df_runbook","main_task_local_reference":{"kind":"app_task","name":"3aea1c52_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"web"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ac4ac1e0_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"36ef4de1_runbook","main_task_local_reference":{"kind":"app_task","name":"ac4ac1e0_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"web"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"ae6ab601_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"57ddaa3c_runbook","main_task_local_reference":{"kind":"app_task","name":"ae6ab601_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"web"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"39a34115_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"a8e138f8_runbook","main_task_local_reference":{"kind":"app_task","name":"39a34115_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"web"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"423c0a9f_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"dcd84f83_runbook","main_task_local_reference":{"kind":"app_task","name":"423c0a9f_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[{"kind":"app_service","name":"app"}],"name":"web","port_list":[],"tier":"","variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"app"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"e981bd46_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"9cad4907_runbook","main_task_local_reference":{"kind":"app_task","name":"e981bd46_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"app"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"a3c18ca7_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"85997b9d_runbook","main_task_local_reference":{"kind":"app_task","name":"a3c18ca7_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"app"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"671f6883_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"c7e37230_runbook","main_task_local_reference":{"kind":"app_task","name":"671f6883_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"app"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"7b788d47_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"254e61ad_runbook","main_task_local_reference":{"kind":"app_task","name":"7b788d47_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"app"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"6c8a6cd0_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"1ec3c530_runbook","main_task_local_reference":{"kind":"app_task","name":"6c8a6cd0_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[{"kind":"app_service","name":"DB"}],"name":"app","port_list":[],"tier":"","variable_list":[],"description":""},{"singleton":false,"action_list":[{"description":"System action for creating an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"DB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"902d2f38_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"665adf3a_runbook","main_task_local_reference":{"kind":"app_task","name":"902d2f38_dag"},"variable_list":[]},"name":"action_create"},{"description":"System action for deleting an application. Deletes created VMs as well","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"DB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"93d1f957_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"eec5a7dd_runbook","main_task_local_reference":{"kind":"app_task","name":"93d1f957_dag"},"variable_list":[]},"name":"action_delete"},{"description":"System action for starting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"DB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"1360f233_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"68a25bb4_runbook","main_task_local_reference":{"kind":"app_task","name":"1360f233_dag"},"variable_list":[]},"name":"action_start"},{"description":"System action for stopping an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"DB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"1f6f13a4_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"8e892d4b_runbook","main_task_local_reference":{"kind":"app_task","name":"1f6f13a4_dag"},"variable_list":[]},"name":"action_stop"},{"description":"System action for restarting an application","type":"system","critical":false,"runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_service","name":"DB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"7990eed2_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"99af3995_runbook","main_task_local_reference":{"kind":"app_task","name":"7990eed2_dag"},"variable_list":[]},"name":"action_restart"}],"depends_on_list":[],"name":"DB","port_list":[],"tier":"","variable_list":[],"description":""}],"substrate_definition_list":[{"description":"","action_list":[],"type":"AHV_VM","name":"webserver","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"ntnx_USR"}},"editables":{"create_spec":{"resources":{"nic_list":{"0":{"ip_endpoint_list":{"0":{"ip":true}},"subnet_reference":true}},"serial_port_list":{},"boot_config":true,"disk_list":{}}}},"os_type":"Linux","create_spec":{"name":"@@{calm_application_name}@@-web","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"192.168.1.91","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"817484be-dcdd-4f4b-8c50-cd44368d53c6"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"gpu_list":[],"memory_size_mib":2048,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":null,"power_state":"ON","type":"","account_uuid":"10bd1d3b-8dce-407a-9562-64759eec4a11","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"Ubi1804a","uuid":"d49c8389-7d6c-4c0d-944d-c832ff718880"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":{"AppType":"FinApp","AppTier":"web"}},"variable_list":[]},{"description":"","action_list":[],"type":"AHV_VM","name":"appserver","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"ntnx_USR"}},"editables":{"create_spec":{"resources":{"nic_list":{"0":{"ip_endpoint_list":{"0":{"ip":true}},"subnet_reference":true}},"serial_port_list":{},"boot_config":true,"disk_list":{}}}},"os_type":"Linux","create_spec":{"name":"@@{calm_application_name}@@-app","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"192.168.1.92","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"817484be-dcdd-4f4b-8c50-cd44368d53c6"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"gpu_list":[],"memory_size_mib":2048,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":null,"power_state":"ON","type":"","account_uuid":"10bd1d3b-8dce-407a-9562-64759eec4a11","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"Ubi1804a","uuid":"d49c8389-7d6c-4c0d-944d-c832ff718880"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":{"AppType":"FinApp","AppTier":"app"}},"variable_list":[]},{"description":"","action_list":[],"type":"AHV_VM","name":"DBserver","readiness_probe":{"connection_type":"SSH","retries":"5","connection_protocol":"","connection_port":22,"address":"@@{platform.status.resources.nic_list[0].ip_endpoint_list[0].ip}@@","delay_secs":"60","disable_readiness_probe":false,"login_credential_local_reference":{"kind":"app_credential","name":"ntnx_USR"}},"editables":{"create_spec":{"resources":{"nic_list":{"0":{"ip_endpoint_list":{"0":{"ip":true}},"subnet_reference":true}},"serial_port_list":{},"boot_config":true,"disk_list":{}}}},"os_type":"Linux","create_spec":{"name":"@@{calm_application_name}@@-DB","resources":{"nic_list":[{"nic_type":"NORMAL_NIC","ip_endpoint_list":[{"ip":"192.168.1.93","type":"ASSIGNED"}],"network_function_chain_reference":null,"network_function_nic_type":"INGRESS","mac_address":"","subnet_reference":{"kind":"subnet","type":"","name":"","uuid":"817484be-dcdd-4f4b-8c50-cd44368d53c6"},"type":""}],"serial_port_list":[],"guest_tools":null,"num_vcpus_per_socket":1,"num_sockets":1,"gpu_list":[],"memory_size_mib":2048,"parent_reference":null,"hardware_clock_timezone":"","guest_customization":null,"power_state":"ON","type":"","account_uuid":"10bd1d3b-8dce-407a-9562-64759eec4a11","boot_config":{"boot_device":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"}},"type":"","boot_type":"","mac_address":""},"disk_list":[{"data_source_reference":{"kind":"image","type":"","name":"Ubi1804a","uuid":"d49c8389-7d6c-4c0d-944d-c832ff718880"},"type":"","disk_size_mib":0,"volume_group_reference":null,"device_properties":{"type":"","disk_address":{"type":"","device_index":0,"adapter_type":"SCSI"},"device_type":"DISK"}}]},"availability_zone_reference":null,"backup_policy":null,"type":"","cluster_reference":null,"categories":{"AppTier":"DB","AppType":"FinApp"}},"variable_list":[]}],"credential_definition_list":[{"username":"ntnxuser","description":"","type":"PASSWORD","secret":{"attrs":{"is_secret_modified":true,"secret_reference":{}},"value":"uCY90Yd6wu4vuXfn4H\/MA7pVk83oqB\/W0ajbXK1Y66v1knTBB\/Vf0I28Og==:utf-8"},"name":"ntnx_USR"}],"package_definition_list":[{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"web"}],"name":"Apache","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Apache"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"Install Apache2"}],"name":"cc359e5f_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"web"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"Install Apache2","attrs":{"exit_status":[],"script":"#!\/bin\/sh\n\nsudo hostname @@{webserver.name}@@\n\nsudo git clone https:\/\/github.com\/neslok\/calm_flow.git\n\nsudo chmod +x \/home\/ntnxuser\/calm_flow\/InstallApache\n\nsudo \/home\/ntnxuser\/calm_flow\/InstallApache\n\nsudo sleep 1m\n\n#sudo mount -t cifs -o guest \/\/@@{appserver.address}@@\/public\/ \/var\/www\/html\/\n\nsudo sed -i '$ a ## cifs mount \\n\/\/@@{appserver.address}@@\/public   \/var\/www\/html   cifs guest,uid=1000     0 0' \/etc\/fstab\n\nsudo mount -a\n\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"ntnx_USR"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"466ad6da_runbook","main_task_local_reference":{"kind":"app_task","name":"cc359e5f_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Apache"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"023779a6_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"65fcb70f_runbook","main_task_local_reference":{"kind":"app_task","name":"023779a6_dag"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"app"}],"name":"Package2","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package2"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"AppInstall"}],"name":"b25c03e1_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"app"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"AppInstall","attrs":{"exit_status":[],"script":"#!\/bin\/sh\n\nsudo hostname @@{appserver.name}@@\n\ndbIP=@@{DBserver.address}@@\n\necho $dbIP >>dbIP\n\nsudo git clone https:\/\/github.com\/neslok\/calm_flow.git\n\nsudo chmod +x \/home\/ntnxuser\/calm_flow\/InstallApp\n\nsudo \/home\/ntnxuser\/calm_flow\/InstallApp\n\nsudo mount -t nfs @@{DBserver.address}@@:\/mnt\/nfs_share \/mnt\/samba\/public\/\n\nsudo sed -i '$ a ## nfs mount\\n@@{DBserver.address}@@:\/mnt\/nfs_share     \/mnt\/samba\/public   nfs defaults    0 0' \/etc\/fstab\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"ntnx_USR"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"e8284eac_runbook","main_task_local_reference":{"kind":"app_task","name":"b25c03e1_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package2"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"73ff18d2_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"21df1228_runbook","main_task_local_reference":{"kind":"app_task","name":"73ff18d2_dag"},"variable_list":[]}},"variable_list":[]},{"description":"","action_list":[],"type":"DEB","service_local_reference_list":[{"kind":"app_service","name":"DB"}],"name":"Package3","version":"","options":{"install_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package3"},"retries":"0","description":"","child_tasks_local_reference_list":[{"kind":"app_task","name":"DBInstall"}],"name":"5db7fc8c_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]},{"target_any_local_reference":{"kind":"app_service","name":"DB"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"DBInstall","attrs":{"exit_status":[],"script":"#!\/bin\/sh\n\nsudo hostname @@{DBserver.name}@@\n\nsudo git clone https:\/\/github.com\/neslok\/calm_flow.git\n\nsudo sed -i 's\/Financial\/@@{calm_application_name}@@\/g' \/home\/ntnxuser\/calm_flow\/index.html\n\nsudo chmod +x \/home\/ntnxuser\/calm_flow\/InstallDB\n\nsudo \/home\/ntnxuser\/calm_flow\/InstallDB\n\n\n\n\n","script_type":"sh","type":"","command_line_args":"","login_credential_local_reference":{"kind":"app_credential","name":"ntnx_USR"}},"timeout_secs":"0","type":"EXEC","variable_list":[]}],"description":"","name":"36edc789_runbook","main_task_local_reference":{"kind":"app_task","name":"5db7fc8c_dag"},"variable_list":[]},"type":"","uninstall_runbook":{"task_definition_list":[{"target_any_local_reference":{"kind":"app_package","name":"Package3"},"retries":"0","description":"","child_tasks_local_reference_list":[],"name":"06d7109d_dag","attrs":{"edges":[],"type":""},"timeout_secs":"0","type":"DAG","variable_list":[]}],"description":"","name":"dcab04c2_runbook","main_task_local_reference":{"kind":"app_task","name":"06d7109d_dag"},"variable_list":[]}},"variable_list":[]}],"app_profile_list":[{"deployment_create_list":[{"type":"GREENFIELD","action_list":[],"name":"0628530c_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Apache"}],"substrate_local_reference":{"kind":"app_substrate","name":"webserver"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"24661e0a_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Package2"}],"substrate_local_reference":{"kind":"app_substrate","name":"appserver"},"variable_list":[],"description":""},{"type":"GREENFIELD","action_list":[],"name":"6766c911_deployment","min_replicas":"1","default_replicas":"1","depends_on_list":[],"published_service_local_reference_list":[],"max_replicas":"1","package_local_reference_list":[{"kind":"app_package","name":"Package3"}],"substrate_local_reference":{"kind":"app_substrate","name":"DBserver"},"variable_list":[],"description":""}],"description":"","action_list":[],"name":"Default","variable_list":[]}],"published_service_definition_list":[],"default_credential_local_reference":{"kind":"app_credential","name":"ntnx_USR"},"type":"USER"},"name":"flowdemo_1"},"api_version":"3.0","metadata":{"last_update_time":"1602702733664057","kind":"blueprint","spec_version":8,"creation_time":"1590626990549913","name":"flowdemo_1"}}